import{aq as T,ch as X,E as y,r as g,L as F,v as U,d as O,D as W,aW as C,q as E,ci as z,C as Y,aN as D,a as H,S as J,T as I,W as Z,as as j,V as K,bw as ee,cj as V,ck as te}from"./index-8c9c6f94.js";import{d as ne}from"./Tooltip-1e2dcb35.js";import{g as se}from"./Space-ab388edd.js";import{s as ae,i as re,a as ie}from"./index-dd1efb4f.js";function oe(e){if(typeof e=="number")return{"":e.toString()};const n={};return e.split(/ +/).forEach(s=>{if(s==="")return;const[r,t]=s.split(":");t===void 0?n[""]=r:n[r]=t}),n}function x(e,n){var s;if(e==null)return;const r=oe(e);if(n===void 0)return r[""];if(typeof n=="string")return(s=r[n])!==null&&s!==void 0?s:r[""];if(Array.isArray(n)){for(let t=n.length-1;t>=0;--t){const a=n[t];if(a in r)return r[a]}return r[""]}else{let t,a=-1;return Object.keys(r).forEach(i=>{const o=Number(i);!Number.isNaN(o)&&n>=o&&o>=a&&(a=o,t=r[i])}),t}}function le(e){var n;const s=(n=e.dirs)===null||n===void 0?void 0:n.find(({dir:r})=>r===T);return!!(s&&s.value===!1)}const ue={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function fe(e){return`(min-width: ${e}px)`}const N={};function de(e=ue){if(!X)return y(()=>[]);if(typeof window.matchMedia!="function")return y(()=>[]);const n=g({}),s=Object.keys(e),r=(t,a)=>{t.matches?n.value[a]=!0:n.value[a]=!1};return s.forEach(t=>{const a=e[t];let i,o;N[a]===void 0?(i=window.matchMedia(fe(a)),i.addEventListener?i.addEventListener("change",f=>{o.forEach(u=>{u(f,t)})}):i.addListener&&i.addListener(f=>{o.forEach(u=>{u(f,t)})}),o=new Set,N[a]={mql:i,cbs:o}):(i=N[a].mql,o=N[a].cbs),o.add(r),i.matches&&o.forEach(f=>{f(i,t)})}),F(()=>{s.forEach(t=>{const{cbs:a}=N[e[t]];a.has(r)&&a.delete(r)})}),y(()=>{const{value:t}=n;return s.filter(a=>t[a])})}const L=1,P=U("n-grid"),Q=1,pe={span:{type:[Number,String],default:Q},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},be=O({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:pe,setup(){const{isSsrRef:e,xGapRef:n,itemStyleRef:s,overflowRef:r,layoutShiftDisabledRef:t}=W(P),a=z();return{overflow:r,itemStyle:s,layoutShiftDisabled:t,mergedXGap:y(()=>C(n.value||0)),deriveStyle:()=>{e.value;const{privateSpan:i=Q,privateShow:o=!0,privateColStart:f=void 0,privateOffset:u=0}=a.vnode.props,{value:m}=n,R=C(m||0);return{display:o?"":"none",gridColumn:`${f??`span ${i}`} / span ${i}`,marginLeft:u?`calc((100% - (${i} - 1) * ${R}) / ${i} * ${u} + ${R} * ${u})`:""}}}},render(){var e,n;if(this.layoutShiftDisabled){const{span:s,offset:r,mergedXGap:t}=this;return E("div",{style:{gridColumn:`span ${s} / span ${s}`,marginLeft:r?`calc((100% - (${s} - 1) * ${t}) / ${s} * ${r} + ${t} * ${r})`:""}},this.$slots)}return E("div",{style:[this.itemStyle,this.deriveStyle()]},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e,{overflow:this.overflow}))}}),ve={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},q=24,A="__ssr__",ce={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:q},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},we=O({name:"Grid",inheritAttrs:!1,props:ce,setup(e){const{mergedClsPrefixRef:n,mergedBreakpointsRef:s}=Y(e),r=/^\d+$/,t=g(void 0),a=de((s==null?void 0:s.value)||ve),i=D(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),o=y(()=>{if(i.value)return e.responsive==="self"?t.value:a.value}),f=D(()=>{var d;return(d=Number(x(e.cols.toString(),o.value)))!==null&&d!==void 0?d:q}),u=D(()=>x(e.xGap.toString(),o.value)),m=D(()=>x(e.yGap.toString(),o.value)),R=d=>{t.value=d.contentRect.width},c=d=>{ne(R,d)},b=g(!1),w=y(()=>{if(e.responsive==="self")return c}),p=g(!1),h=g();return H(()=>{const{value:d}=h;d&&d.hasAttribute(A)&&(d.removeAttribute(A),p.value=!0)}),J(P,{layoutShiftDisabledRef:I(e,"layoutShiftDisabled"),isSsrRef:p,itemStyleRef:I(e,"itemStyle"),xGapRef:u,overflowRef:b}),{isSsr:!Z,contentEl:h,mergedClsPrefix:n,style:y(()=>e.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${e.cols}, minmax(0, 1fr))`,columnGap:C(e.xGap),rowGap:C(e.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${f.value}, minmax(0, 1fr))`,columnGap:C(u.value),rowGap:C(m.value)}),isResponsive:i,responsiveQuery:o,responsiveCols:f,handleResize:w,overflow:b}},render(){if(this.layoutShiftDisabled)return E("div",j({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var n,s,r,t,a,i,o;this.overflow=!1;const f=ee(se(this)),u=[],{collapsed:m,collapsedRows:R,responsiveCols:c,responsiveQuery:b}=this;f.forEach(l=>{var G,S,v,_,B;if(((G=l==null?void 0:l.type)===null||G===void 0?void 0:G.__GRID_ITEM__)!==!0)return;if(le(l)){const $=V(l);$.props?$.props.privateShow=!1:$.props={privateShow:!1},u.push({child:$,rawChildSpan:0});return}l.dirs=((S=l.dirs)===null||S===void 0?void 0:S.filter(({dir:$})=>$!==T))||null,((v=l.dirs)===null||v===void 0?void 0:v.length)===0&&(l.dirs=null);const M=V(l),k=Number((B=x((_=M.props)===null||_===void 0?void 0:_.span,b))!==null&&B!==void 0?B:L);k!==0&&u.push({child:M,rawChildSpan:k})});let w=0;const p=(n=u[u.length-1])===null||n===void 0?void 0:n.child;if(p!=null&&p.props){const l=(s=p.props)===null||s===void 0?void 0:s.suffix;l!==void 0&&l!==!1&&(w=Number((t=x((r=p.props)===null||r===void 0?void 0:r.span,b))!==null&&t!==void 0?t:L),p.props.privateSpan=w,p.props.privateColStart=c+1-w,p.props.privateShow=(a=p.props.privateShow)!==null&&a!==void 0?a:!0)}let h=0,d=!1;for(const{child:l,rawChildSpan:G}of u){if(d&&(this.overflow=!0),!d){const S=Number((o=x((i=l.props)===null||i===void 0?void 0:i.offset,b))!==null&&o!==void 0?o:0),v=Math.min(G+S,c);if(l.props?(l.props.privateSpan=v,l.props.privateOffset=S):l.props={privateSpan:v,privateOffset:S},m){const _=h%c;v+_>c&&(h+=c-_),v+h+w>R*c?d=!0:h+=v}}d&&(l.props?l.props.privateShow!==!0&&(l.props.privateShow=!1):l.props={privateShow:!1})}return E("div",j({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[A]:this.isSsr||void 0},this.$attrs),u.map(({child:l})=>l))};return this.isResponsive&&this.responsive==="self"?E(K,{onResize:this.handleResize},{default:e}):e()}}),me={property:[{name:"无属性",value:"0"},{name:"火属性",value:"1"},{name:"水属性",value:"2"},{name:"电属性",value:"3"},{name:"草属性",value:"4"},{name:"暗属性",value:"5"},{name:"龙属性",value:"6"},{name:"地属性",value:"7"},{name:"冰属性",value:"8"}],adaptive:[{name:"手工作业",value:"0"},{name:"搬运",value:"1"},{name:"牧场",value:"2"},{name:"采矿",value:"3"},{name:"采集",value:"4"},{name:"伐木",value:"5"},{name:"制药",value:"6"},{name:"播种",value:"7"},{name:"生火",value:"8"},{name:"浇水",value:"9"},{name:"发电",value:"10"},{name:"冷却",value:"11"}],brand:[{name:"饿了么",value:1},{name:"网易云",value:2},{name:"QQ音乐",value:3},{name:"京东",value:4},{name:"天猫",value:5}],category:[{name:"影音会员",value:0},{name:"商超购物",value:1},{name:"吃喝玩乐",value:2}]},he=e=>ae(e.reduce((n,s)=>n.concat({type:s,items:me[s]}),[]));function _e(e=[]){const n=g({}),s=g(!1);return e.length&&(s.value=!0,he(e).then(t=>{n.value=t.reduce((a,i)=>(a[i.type]=i.items,a),{})}).finally(()=>{s.value=!1})),{dict:n,dictLoading:s,formatDict:(t,a,i="name",o="value")=>{if(re(t)||ie(t))return"-";const f=te(a)?a:n.value[a];if(f&&f.length){const u=f.find(m=>m[o]===t);return u?u[i]:t}else return t}}}export{be as _,we as a,_e as u};
